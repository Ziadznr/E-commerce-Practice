/**
 * 复制目标页面元素下的内容
 * @param target 目标页面元素
 * @returns 是否执行成功提示
 */
export default function copyData(target) {
    return copyText(target.innerHTML.trim());
}
function createNode(text) {
    const node = document.createElement('pre');
    node.style.display = 'none';
    node.textContent = text;
    return node;
}
function copyNode(node) {
    const selection = getSelection();
    if (!selection) {
        return Promise.resolve(false);
    }
    selection.removeAllRanges();
    const range = document.createRange();
    range.selectNodeContents(node);
    selection.addRange(range);
    const bool = document.execCommand('copy');
    selection.removeAllRanges();
    return Promise.resolve(bool);
}
function copyText(text) {
    if ('clipboard' in navigator) {
        return navigator.clipboard.writeText(text).then(() => true).catch(() => false);
    }
    const body = document.body;
    if (!body) {
        return Promise.resolve(false);
    }
    const node = createNode(text);
    body.appendChild(node);
    return copyNode(node).finally(() => body.removeChild(node));
}
